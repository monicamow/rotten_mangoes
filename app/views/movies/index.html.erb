<h1>Movie Listing</h1>

<%= form_tag movies_path, method: :get do %>
  <div>
    <%= label_tag :title %><br/>
    <%= text_field_tag :title %>
  </div>
  <div>
    <%= label_tag :director %><br/>
    <%= text_field_tag :director %>
  </div>
    <%= label_tag 'Duration' %><br/>
    <%= select_tag(:runtime_in_minutes, options_for_select(["Under 90 minutes", "Between 90 and 120 minutes", "Over 120 minutes"]), include_blank: true) %>
  <div>
    <%= submit_tag 'Search', name: nil %>
  </div>
<% end %>

<% if @searched_movies %>
  <% @searched_movies.each do |searched_movie| %>
    <% unless searched_movie.nil? %>
      <ul>
        <li><%= link_to searched_movie.title, movie_path(searched_movie) %></li>
      </ul>
    <% end %>
  <% end %>
<% end %>

<%= link_to 'New Movie', new_movie_path %>

<% @movies.each do |movie| %>
  <%= render partial: "movie", locals: {movie: movie} %>
<% end %>

<%= link_to 'Home', welcome_index_path %>